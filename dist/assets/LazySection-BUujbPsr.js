import{j as e}from"./ui-framework-DK779t90.js";import{r as t,c as r}from"./react-vendor-In3W6_6s.js";var n=new Map,i=new WeakMap,s=0;function o(e){return Object.keys(e).sort().filter((t=>void 0!==e[t])).map((t=>{return`${t}_${"root"===t?(r=e.root,r?(i.has(r)||(s+=1,i.set(r,s.toString())),i.get(r)):"0"):e[t]}`;var r})).toString()}function a(e,t,r={},i=undefined){if(void 0===window.IntersectionObserver&&void 0!==i){const n=e.getBoundingClientRect();return t(i,{isIntersecting:i,target:e,intersectionRatio:"number"==typeof r.threshold?r.threshold:0,time:0,boundingClientRect:n,intersectionRect:n,rootBounds:n}),()=>{}}const{id:s,observer:a,elements:c}=function(e){const t=o(e);let r=n.get(t);if(!r){const i=new Map;let s;const o=new IntersectionObserver((t=>{t.forEach((t=>{var r;const n=t.isIntersecting&&s.some((e=>t.intersectionRatio>=e));e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=n),null==(r=i.get(t.target))||r.forEach((e=>{e(n,t)}))}))}),e);s=o.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),r={id:t,observer:o,elements:i},n.set(t,r)}return r}(r),l=c.get(e)||[];return c.has(e)||c.set(e,l),l.push(t),a.observe(e),function(){l.splice(l.indexOf(t),1),0===l.length&&(c.delete(e),a.unobserve(e)),0===c.size&&(a.disconnect(),n.delete(s))}}function c({threshold:e,delay:r,trackVisibility:n,rootMargin:i,root:s,triggerOnce:o,skip:c,initialInView:l,fallbackInView:d,onChange:u}={}){var g;const[h,f]=t.useState(null),v=t.useRef(u),[y,b]=t.useState({inView:!!l,entry:void 0});v.current=u,t.useEffect((()=>{if(c||!h)return;let t;return t=a(h,((e,r)=>{b({inView:e,entry:r}),v.current&&v.current(e,r),r.isIntersecting&&o&&t&&(t(),t=void 0)}),{root:s,rootMargin:i,threshold:e,trackVisibility:n,delay:r},d),()=>{t&&t()}}),[Array.isArray(e)?e.toString():e,h,s,i,o,c,n,d,r]);const m=null==(g=y.entry)?void 0:g.target,p=t.useRef(void 0);h||!m||o||c||p.current===m||(p.current=m,b({inView:!!l,entry:void 0}));const w=[f,y.inView,y.entry];return w.ref=w[0],w.inView=w[1],w.entry=w[2],w}const l=e.jsx("div",{className:"w-full py-20 flex items-center justify-center animate-pulse bg-dark-800/30",children:e.jsx("span",{className:"text-gray-500",children:"Loading..."})}),d=({loader:n,placeholder:i=l,rootMargin:s="200px"})=>{const{ref:o,inView:a}=c({triggerOnce:!0,rootMargin:s}),d=r.useMemo((()=>r.lazy(n)),[n]);return e.jsx("div",{ref:o,style:{minHeight:"20vh"},children:a?e.jsx(t.Suspense,{fallback:i,children:e.jsx(d,{})}):i})};export{d as L,c as u};
